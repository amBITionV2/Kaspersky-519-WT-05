{% extends 'base.html' %}
{% block content %}
  <div class="dashboard">
    <!-- Top Navigation Bar -->
    <nav class="dashboard-nav">
      <div class="nav-container">
        <h3 style="margin:0; color: var(--primary-color);">Welcome, {{ current_user.full_name or current_user.username }}</h3>
        <div class="nav-buttons">
          <a href="#profile" class="nav-btn active"><i class="fa-regular fa-user"></i> My Profile</a>
          <a href="#requests" class="nav-btn"><i class="fa-solid fa-list-check"></i> My Requests</a>
          <a href="#offers" class="nav-btn"><i class="fa-solid fa-hands-helping"></i> My Offers</a>
          <a href="#reviews" class="nav-btn"><i class="fa-regular fa-star"></i> My Reviews</a>
          <a href="#reputation" class="nav-btn"><i class="fa-solid fa-chart-line"></i> Reputation Score</a>
        </div>
      </div>
    </nav>

    <div class="dashboard-content">
      <!-- Horizontal Stats Section -->
      <div class="stats-horizontal">
        <div class="stat-card">
          <h4>Total requests created</h4>
          <div class="value">{{ stats.total_requests }}</div>
        </div>
        <div class="stat-card">
          <h4>Total help offers made</h4>
          <div class="value">{{ stats.total_offers }}</div>
        </div>
        <div class="stat-card">
          <h4>Current reputation score</h4>
          <div class="value">{{ '%.1f'|format(stats.reputation) }}</div>
        </div>
        <div class="stat-card">
          <h4>Pending tasks</h4>
          <div class="value">{{ stats.pending_tasks }}</div>
        </div>
      </div>

      <div class="section" id="recent">
        <h3>Recent Activity</h3>
        {% if recent.requests or recent.offers %}
          <ul>
            {% for r in recent.requests %}
              <li>
                <strong>Request:</strong> {{ r.title }}
                <span class="muted"> 路 {{ r.status }} 路 {{ r.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
              </li>
            {% endfor %}
            {% for o in recent.offers %}
              <li>
                <strong>Offer:</strong> on request #{{ o.request_id }}
                <span class="muted"> 路 {{ o.status }} 路 {{ o.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="muted">No recent activity yet.</p>
        {% endif %}
      </div>

      <div class="section actions-row">
        <a class="btn" href="{{ url_for('request_help') }}"><i class="fa-solid fa-circle-plus"></i> Create New Request</a>
        <a class="btn secondary" href="{{ url_for('offer_help') }}"><i class="fa-solid fa-compass"></i> Browse Help Requests</a>
      </div>
    </div>
  </div>
{% endblock %}
